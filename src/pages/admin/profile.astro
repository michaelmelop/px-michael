---
import AdminLayout from '../../layouts/AdminLayout.astro';
---

<AdminLayout title="Perfil de Usuario" currentPage="profile">
  <div class="profile-container">
    <!-- Header -->
    <div class="profile-header mb-6">
      <h1 class="page-title">Perfil de Usuario</h1>
      <p class="page-subtitle">Administra tu informaci√≥n personal y configuraci√≥n de cuenta</p>
    </div>

    <div class="profile-content grid grid-2">
      <!-- Profile Info -->
      <div class="profile-info-section">
        <div class="profile-card card mb-6">
          <div class="card-body">
            <div class="profile-avatar-section">
              <div class="profile-avatar">
                <span class="avatar-text">AD</span>
              </div>
              <div class="avatar-actions">
                <button class="btn btn-sm btn-secondary" onclick="changeAvatar()">
                  Cambiar Avatar
                </button>
              </div>
            </div>
            <div class="profile-basic-info">
              <h2 class="profile-name">Administrador</h2>
              <p class="profile-role">Administrador del Sistema</p>
              <p class="profile-email">admin@example.com</p>
              <p class="profile-join-date">Miembro desde: 15 de Marzo, 2024</p>
            </div>
          </div>
        </div>

        <!-- Activity Stats -->
        <div class="activity-stats-card card">
          <div class="card-header">
            <h3>Estad√≠sticas de Actividad</h3>
          </div>
          <div class="card-body">
            <div class="stats-grid">
              <div class="stat-item">
                <div class="stat-icon">üìä</div>
                <div class="stat-details">
                  <div class="stat-number">1,234</div>
                  <div class="stat-label">Acciones Realizadas</div>
                </div>
              </div>
              <div class="stat-item">
                <div class="stat-icon">üïê</div>
                <div class="stat-details">
                  <div class="stat-number">45h</div>
                  <div class="stat-label">Tiempo Total</div>
                </div>
              </div>
              <div class="stat-item">
                <div class="stat-icon">üìÖ</div>
                <div class="stat-details">
                  <div class="stat-number">12</div>
                  <div class="stat-label">D√≠as Activos</div>
                </div>
              </div>
              <div class="stat-item">
                <div class="stat-icon">üîê</div>
                <div class="stat-details">
                  <div class="stat-number">3</div>
                  <div class="stat-label">√öltimo Login</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Profile Settings -->
      <div class="profile-settings-section">
        <!-- Personal Information -->
        <div class="personal-info-card card mb-6">
          <div class="card-header">
            <h3>Informaci√≥n Personal</h3>
          </div>
          <div class="card-body">
            <form class="profile-form">
              <div class="form-group">
                <label class="form-label">Nombre Completo</label>
                <input type="text" class="form-input" value="Administrador del Sistema" placeholder="Nombre completo">
              </div>
              <div class="form-group">
                <label class="form-label">Email</label>
                <input type="email" class="form-input" value="admin@example.com" placeholder="Email">
              </div>
              <div class="form-group">
                <label class="form-label">Tel√©fono</label>
                <input type="tel" class="form-input" value="+52 55 1234 5678" placeholder="N√∫mero de tel√©fono">
              </div>
              <div class="form-group">
                <label class="form-label">Departamento</label>
                <select class="form-select">
                  <option value="admin" selected>Administraci√≥n</option>
                  <option value="it">Tecnolog√≠a</option>
                  <option value="sales">Ventas</option>
                  <option value="marketing">Marketing</option>
                </select>
              </div>
              <div class="form-group">
                <label class="form-label">Ubicaci√≥n</label>
                <input type="text" class="form-input" value="Ciudad de M√©xico, M√©xico" placeholder="Ubicaci√≥n">
              </div>
              <div class="form-group">
                <label class="form-label">Biograf√≠a</label>
                <textarea class="form-textarea" rows="3" placeholder="Cu√©ntanos sobre ti...">Administrador del sistema con amplia experiencia en gesti√≥n de plataformas digitales.</textarea>
              </div>
              <div class="form-actions">
                <button type="button" class="btn btn-primary" onclick="updateProfile()">
                  Actualizar Informaci√≥n
                </button>
              </div>
            </form>
          </div>
        </div>

        <!-- Security Settings -->
        <div class="security-card card mb-6">
          <div class="card-header">
            <h3>Configuraci√≥n de Seguridad</h3>
          </div>
          <div class="card-body">
            <form class="security-form">
              <div class="form-group">
                <label class="form-label">Contrase√±a Actual</label>
                <input type="password" class="form-input" placeholder="Contrase√±a actual">
              </div>
              <div class="form-group">
                <label class="form-label">Nueva Contrase√±a</label>
                <input type="password" class="form-input" placeholder="Nueva contrase√±a">
              </div>
              <div class="form-group">
                <label class="form-label">Confirmar Nueva Contrase√±a</label>
                <input type="password" class="form-input" placeholder="Confirmar contrase√±a">
              </div>
              <div class="form-group">
                <div class="security-options">
                  <div class="security-option">
                    <input type="checkbox" id="two-factor" class="option-checkbox">
                    <label for="two-factor" class="option-label">
                      <span class="option-icon">üîê</span>
                      <div class="option-content">
                        <div class="option-title">Autenticaci√≥n de Dos Factores</div>
                        <div class="option-description">Agrega una capa extra de seguridad</div>
                      </div>
                    </label>
                  </div>
                  <div class="security-option">
                    <input type="checkbox" id="email-notifications" class="option-checkbox" checked>
                    <label for="email-notifications" class="option-label">
                      <span class="option-icon">üìß</span>
                      <div class="option-content">
                        <div class="option-title">Notificaciones de Seguridad</div>
                        <div class="option-description">Recibe alertas por email sobre actividad sospechosa</div>
                      </div>
                    </label>
                  </div>
                  <div class="security-option">
                    <input type="checkbox" id="session-timeout" class="option-checkbox" checked>
                    <label for="session-timeout" class="option-label">
                      <span class="option-icon">‚è∞</span>
                      <div class="option-content">
                        <div class="option-title">Timeout de Sesi√≥n</div>
                        <div class="option-description">Cierra autom√°ticamente despu√©s de 30 minutos</div>
                      </div>
                    </label>
                  </div>
                </div>
              </div>
              <div class="form-actions">
                <button type="button" class="btn btn-primary" onclick="updatePassword()">
                  Cambiar Contrase√±a
                </button>
              </div>
            </form>
          </div>
        </div>

        <!-- Preferences -->
        <div class="preferences-card card">
          <div class="card-header">
            <h3>Preferencias</h3>
          </div>
          <div class="card-body">
            <form class="preferences-form">
              <div class="form-group">
                <label class="form-label">Tema</label>
                <select class="form-select">
                  <option value="light" selected>Claro</option>
                  <option value="dark">Oscuro</option>
                  <option value="auto">Autom√°tico</option>
                </select>
              </div>
              <div class="form-group">
                <label class="form-label">Idioma</label>
                <select class="form-select">
                  <option value="es" selected>Espa√±ol</option>
                  <option value="en">Ingl√©s</option>
                  <option value="fr">Franc√©s</option>
                </select>
              </div>
              <div class="form-group">
                <label class="form-label">Zona Horaria</label>
                <select class="form-select">
                  <option value="America/Mexico_City" selected>Am√©rica/Ciudad de M√©xico</option>
                  <option value="America/New_York">Am√©rica/Nueva York</option>
                  <option value="Europe/Madrid">Europa/Madrid</option>
                </select>
              </div>
              <div class="form-group">
                <label class="form-label">Notificaciones</label>
                <div class="notification-preferences">
                  <div class="notification-item">
                    <input type="checkbox" id="email-updates" checked>
                    <label for="email-updates">Actualizaciones por email</label>
                  </div>
                  <div class="notification-item">
                    <input type="checkbox" id="browser-notifications" checked>
                    <label for="browser-notifications">Notificaciones del navegador</label>
                  </div>
                  <div class="notification-item">
                    <input type="checkbox" id="weekly-reports">
                    <label for="weekly-reports">Reportes semanales</label>
                  </div>
                </div>
              </div>
              <div class="form-actions">
                <button type="button" class="btn btn-primary" onclick="updatePreferences()">
                  Guardar Preferencias
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</AdminLayout>

<style>
  .profile-container {
    max-width: 1200px;
    margin: 0 auto;
  }

  .page-title {
    font-size: 1.75rem;
    font-weight: 700;
    color: var(--color-text);
    margin-bottom: 0.25rem;
  }

  .page-subtitle {
    color: var(--color-text-secondary);
    font-size: 0.875rem;
  }

  .profile-content {
    gap: 2rem;
  }

  .profile-avatar-section {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 1rem;
    margin-bottom: 2rem;
  }

  .profile-avatar {
    width: 100px;
    height: 100px;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--color-primary), var(--color-primary-dark));
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-weight: 700;
    font-size: 2rem;
    box-shadow: var(--shadow-md);
  }

  .avatar-text {
    line-height: 1;
  }

  .profile-basic-info {
    text-align: center;
  }

  .profile-name {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--color-text);
    margin-bottom: 0.5rem;
  }

  .profile-role {
    font-size: 1rem;
    color: var(--color-primary);
    font-weight: 500;
    margin-bottom: 0.5rem;
  }

  .profile-email {
    font-size: 0.875rem;
    color: var(--color-text-secondary);
    margin-bottom: 0.5rem;
  }

  .profile-join-date {
    font-size: 0.75rem;
    color: var(--color-text-secondary);
  }

  .stats-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 1rem;
  }

  .stat-item {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.75rem;
    background-color: var(--color-background);
    border-radius: var(--border-radius);
  }

  .stat-icon {
    font-size: 1.5rem;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: var(--color-surface);
    border-radius: var(--border-radius);
  }

  .stat-number {
    font-size: 1.25rem;
    font-weight: 700;
    color: var(--color-text);
  }

  .stat-label {
    font-size: 0.75rem;
    color: var(--color-text-secondary);
  }

  .profile-form,
  .security-form,
  .preferences-form {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
  }

  .form-group {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }

  .form-label {
    font-size: 0.875rem;
    font-weight: 500;
    color: var(--color-text);
  }

  .form-input,
  .form-select,
  .form-textarea {
    padding: 0.5rem;
    border: 1px solid var(--color-border);
    border-radius: var(--border-radius);
    font-size: 0.875rem;
    font-family: inherit;
  }

  .form-textarea {
    resize: vertical;
  }

  .form-actions {
    display: flex;
    gap: 0.5rem;
  }

  .security-options {
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }

  .security-option {
    display: flex;
    align-items: flex-start;
    gap: 0.75rem;
  }

  .option-checkbox {
    width: 20px;
    height: 20px;
    margin-top: 0.25rem;
    accent-color: var(--color-primary);
  }

  .option-label {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    cursor: pointer;
    flex: 1;
  }

  .option-icon {
    font-size: 1.25rem;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: var(--color-background);
    border-radius: var(--border-radius);
  }

  .option-content {
    flex: 1;
  }

  .option-title {
    font-size: 0.875rem;
    font-weight: 500;
    color: var(--color-text);
    margin-bottom: 0.25rem;
  }

  .option-description {
    font-size: 0.75rem;
    color: var(--color-text-secondary);
  }

  .notification-preferences {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }

  .notification-item {
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

  .notification-item input[type="checkbox"] {
    width: 16px;
    height: 16px;
    accent-color: var(--color-primary);
  }

  .notification-item label {
    font-size: 0.875rem;
    color: var(--color-text);
    cursor: pointer;
  }

  /* Mobile responsive */
  @media (max-width: 768px) {
    .profile-content {
      grid-template-columns: 1fr;
      gap: 1rem;
    }

    .stats-grid {
      grid-template-columns: 1fr;
    }

    .security-option {
      flex-direction: column;
      gap: 0.5rem;
    }

    .option-label {
      flex-direction: row;
    }

    .form-actions {
      flex-direction: column;
    }
  }
</style>

<script>
  function changeAvatar() {
    alert('Funcionalidad para cambiar avatar - En desarrollo');
  }

  function updateProfile() {
    alert('Informaci√≥n del perfil actualizada exitosamente');
  }

  function updatePassword() {
    const currentPassword = document.querySelector('input[placeholder="Contrase√±a actual"]').value;
    const newPassword = document.querySelector('input[placeholder="Nueva contrase√±a"]').value;
    const confirmPassword = document.querySelector('input[placeholder="Confirmar contrase√±a"]').value;

    if (!currentPassword || !newPassword || !confirmPassword) {
      alert('Por favor completa todos los campos de contrase√±a');
      return;
    }

    if (newPassword !== confirmPassword) {
      alert('Las contrase√±as no coinciden');
      return;
    }

    alert('Contrase√±a actualizada exitosamente');
  }

  function updatePreferences() {
    alert('Preferencias guardadas exitosamente');
  }
</script>